<ui:composition template="/WEB-INF/templates/layout.xhtml"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui"
>
     <ui:define name="content">
         <div id="contenido" class="wrapper row3">
            <main class="hoc container clear"> 
              <div class="btmspace-80 center">
                <h3 class="nospace">Bienvenidos</h3>      
              </div>
             <!-- InstanceBeginEditable name="EditRegion1" -->
                 
              <h:outputLink value="javascript:void(0)" onclick="PF('dlg').show();" title="login">
            </h:outputLink>
            <p:growl id="growl" sticky="true" showDetail="true" life="3000" />
            <h:form id="form1" >
            <p:panel id="datosA"   style="margin-top: 5%; text-align: center;" widgetVar="dlg" styleClass=" col-md-6 ">
               
                     <h:outputLabel value="Inicio de sesión"/>
                    <p:separator></p:separator>
                    <p:messages autoUpdate="true" showDetail="true" showSummary="true"/>
                   
                
                   <h:panelGrid columns="1" cellpadding="0"  style="text-align: center; padding-left: 30%; ">
                        
                       <p:inputText id="user" value="#{myBean.usuario}" required="true" requiredMessage="Usuario obligatorio" label="username" placeholder="Usuario" size="50" style="margin-bottom: 2%;"
                                    styleClass="col-sm-6 col-xs-8"
                                    />
                       <p:message for="user" style="color:red" showDetail="User"/>
                       <p:password id="pwd" value="#{myBean.password}" required="true" requiredMessage="Contraseña obligatoria" label="password" placeholder="Contraseña" size="50" 
                                   styleClass="col-sm-6 col-xs-8"
                                   />
                       <p:message for="pwd" style="color:red" showDetail="Password"/>
                       
                        <!--p:inputText id="captcha" value="" required="false" label="captcha" placeholder="Captcha" size="50" style="margin-bottom: 2%;"/-->
                        
                        
                    </h:panelGrid>
                    <p:commandButton value="Ingresar"  
                                     action="#{myBean.accessLogin()}"
                                     oncomplete="handleLoginRequest(xhr, status, args)"  
                                     style="margin:20px;"/>
                    
                
            
                     <p:separator /><br></br>
                     <h:outputLabel value="Ingrese con los datos enviados a su correo." style="color:white; font-family: 'Dosis', serif;"/>
               
            </p:panel> 
                
        </h:form>
            <script type="text/javascript">
                function handleLoginRequest(xhr, status, args) {
                    if(args.validationFailed || !args.loggedIn) {
                        PF('dlg').jq.effect("shake", {times:5}, 100);
                        //location.reload(); 
                        //window.location.replace(window.location.href);
                    }
                    else {
                        PF('dlg').hide();
                        $('#loginLink').fadeOut();
                    }
                }
            </script>
            
            
           
                  <!-- InstanceEndEditable -->

              <div class="clear"></div>
            </main>
          </div>
     </ui:define>
</ui:composition>